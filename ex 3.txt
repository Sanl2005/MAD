import 'package:flutter/material.dart';

void main() {
  runApp(MaterialApp(
    home: CalculatorApp(),
  ));
}

class CalculatorApp extends StatelessWidget {
  const CalculatorApp({super.key});

  @override
  Widget build(BuildContext context) {
    return const MaterialApp(
      debugShowCheckedModeBanner: false,
      home: Calculator(),
    );
  }
}

class Calculator extends StatefulWidget {
  const Calculator({super.key});

  @override
  State<Calculator> createState() => _CalculatorState();
}

class _CalculatorState extends State<Calculator> {
  String expression = "";
  String display = "";
  double num1 = 0;
  String operator = "";

  void onButtonClick(String value) {
    setState(() {
      if (value == "C") {
        expression = "";
        display = "";
        num1 = 0;
        operator = "";
      }

      // Operator pressed
      else if (value == "+" || value == "-" || value == "×" || value == "÷") {
        if (display.isNotEmpty) {
          num1 = double.parse(display);
          operator = value;
          expression = "$display $value ";
          display = "";
        }
      }

      // Equals pressed
      else if (value == "=") {
        if (display.isNotEmpty && operator.isNotEmpty) {
          double num2 = double.parse(display);
          double result = 0;

          switch (operator) {
            case "+":
              result = num1 + num2;
              break;
            case "-":
              result = num1 - num2;
              break;
            case "×":
              result = num1 * num2;
              break;
            case "÷":
              result = num1 / num2;
              break;
          }

          expression += display;
          display = result.toString();
        }
      }

      // Number pressed
      else {
        display += value;
      }
    });
  }


  Widget calcButton(String text, Color color) {
    return Expanded(
      child: Padding(
        padding: const EdgeInsets.all(6),
        child: ElevatedButton(
          style: ElevatedButton.styleFrom(
            backgroundColor: color,
            padding: const EdgeInsets.all(22),
          ),
          onPressed: () => onButtonClick(text),
          child: Text(
            text,
            style: const TextStyle(fontSize: 22),
          ),
        ),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.grey[900],
      body: Column(
        children: [

          Spacer(),

          // Display
        Container(
          width: double.infinity,
          padding: const EdgeInsets.all(20),
          alignment: Alignment.centerRight,
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.end,
            children: [

              // Expression
              Text(
                expression,
                style: TextStyle(
                  fontSize: 23,
                  color: Colors.grey.shade400,
                ),
              ),

              const SizedBox(height: 8),

              // Result / Current Input
              Text(
                display.isEmpty ? "0" : display,
                style: const TextStyle(
                  fontSize: 37,
                  color: Colors.white,
                  fontWeight: FontWeight.bold,
                ),
              ),
            ],
          ),
        ),



        Expanded(
            child: Column(
              children: [

                Row(
                  children: [
                    calcButton("7", Colors.grey),
                    calcButton("8", Colors.grey),
                    calcButton("9", Colors.grey),
                    calcButton("÷", Colors.orange),
                  ],
                ),

                Row(
                  children: [
                    calcButton("4", Colors.grey),
                    calcButton("5", Colors.grey),
                    calcButton("6", Colors.grey),
                    calcButton("×", Colors.orange),
                  ],
                ),

                Row(
                  children: [
                    calcButton("1", Colors.grey),
                    calcButton("2", Colors.grey),
                    calcButton("3", Colors.grey),
                    calcButton("-", Colors.orange),
                  ],
                ),

                Row(
                  children: [
                    calcButton("C", Colors.red),
                    calcButton("0", Colors.grey),
                    calcButton("=", Colors.green),
                    calcButton("+", Colors.orange),
                  ],
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}

